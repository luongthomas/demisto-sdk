<!DOCTYPE html>
<html>
    <head>
        <link href="https://unpkg.com/tabulator-tables@4.3.0/dist/css/bootstrap/tabulator_bootstrap4.min.css" rel="stylesheet">
        <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.3.0/dist/js/tabulator.min.js"></script>
    </head>
    <body>
        <div id="example-table"></div>
        <script>
            //define some sample data
            var tabledata = {{ pkgs_status }};
            //create Tabulator on DOM element with id "example-table"
            var table = new Tabulator("#example-table", {
                    data:tabledata,           //load row data from array
                    layout:"fitColumns",      //fit columns to width of table
                    responsiveLayout:"hide",  //hide columns that dont fit on the table
                    tooltips:true,            //show tool tips on cells
                    addRowPos:"top",          //when adding a new row, add it to the top of the table
                    history:true,             //allow undo and redo actions on the table
                    pagination:"local",       //paginate the data
                    paginationSize:7,         //allow 7 rows per page of data
                    movableColumns:true,      //allow column order to be changed
                    resizableRows:true,       //allow row order to be changed
                    initialSort:[{column:"name", dir:"asc"}], //set the initial sort order of the data
                    columns:[                 //define the table columns
                        {title:"Package", field:"pkg", topCalc:"count", width:70,},
                        {title:"Status", field:"status", width:70,  align:"center", formatter:"tickCross", sorter:"boolean",
                            topCalc:"count"},
                        {title:"Path", field:"path", width:200},
                        {title:"Pytest", field:"pytest_errors", formatter:"textarea", width:200},
                        {title:"Flake8", field:"flake8_errors", formatter:"textarea", width:200},
                        {title:"Bandit", field:"bandit_errors", formatter:"textarea", width:200},
                        {title:"Mypy", field:"mypy_errors", formatter:"textarea", width:200},
                        {title:"Pylint", field:"pylint_errors", formatter:"textarea", width:200},
                        {title:"Collected tests", field:"pytest_collected_tests", formatter:"textarea", width:200},
                        {title:"Images", field:"images", width:150},
                        {title:"Python", field:"python_version", width:50}
                    ],
                    rowFormatter:function(row){
                        if(row.getData().status){
                            row.getElement().addClass("table-success"); //mark rows with age greater than or equal to 18 as successful;
                        }
                        else {
                            row.getElement().addClass("table-danger"); //mark rows with age greater than or equal to 18 as successful;
                        }
                    },
                });
        </script>
    </body>
</html>
